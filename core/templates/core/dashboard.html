{%extends 'core/base.html'%} {%load static%} {%block title%}Dashboard{%endblock%} {%block content%}
<div class="container">
	<div class="p-3 rounded-4 shadow-smd-flex flex-column">
		<!-- Welcome message -->
		<h2 class="fw-bold">Welcome {{user.username|title}}!</h2>
		<hr />
		<p>Please select a folder to review vocabulary and then take a quiz to test your learning.</p>
		<hr />
	</div>

	<!-- Folder cards -->
	<div class="row">
		{% for folder in folders %}
		<div class="col-md-3 mb-3 folder-col">
			<div class="card shadow-sm rounded-3 h-100 bg-light">
				<div class="card-body d-flex flex-column text-center h-100">
					<h5 class="card-title rounded-pill bg-white p-2 shadow-sm border" title="{{ folder.name }}">üìÅ {{ folder.name }}</h5>
					<p class="text-muted small mb-2">{{ folder.words.count }} words</p>

					<!-- Buttons -->
					<div class="d-flex flex-wrap gap-2 justify-content-center mt-auto position-relative align-items-center">
						<a href="{% url 'vocabulary' folder.id %}" class="btn btn-secondary-custom btn-sm">Open</a>
						<div class="dropdown">
							<button class="btn btn-primary-custom btn-sm dropdown-toggle" data-bs-toggle="dropdown">Quiz</button>
							<ul class="dropdown-menu shadow">
								<li><a class="dropdown-item text-primary-custom" href="{% url 'quiz' folder.id %}">Vocabulary</a></li>
								<li><a class="dropdown-item text-primary-custom" href="{% url 'quiz_gapfill' folder.id %}">Gap Fill</a></li>
								<li><a class="dropdown-item text-primary-custom" href="{% url 'quiz_listening' folder.id %}">Listening</a></li>
								<li><a class="dropdown-item text-primary-custom" href="{% url 'quiz_reading' folder.id %}">Reading</a></li>
							</ul>
						</div>

						<!-- Trophy icon, extra quiz types need to be manually updated -->
						<span class="badge rounded-pill  fs-5
						{% if folder.scores.vocabulary == 10  and folder.scores.gapfill == 10 and folder.scores.listening == 10 and folder.scores.reading == 10 %} bg-warning text-dark {% else %} bg-secondary text-white {% endif %}
						" title="Perfect Score!"> <i class="bi bi-trophy-fill"></i> </span>
					</div>

					<hr class="my-3" />

					<!-- Last Scores (example static for now) -->
					<div class="mb-2">
						<small class="text-muted d-block mb-1">Last Scores:</small>
						<div class="d-flex gap-2 flex-wrap justify-content-center">
							<span class="badge {% if folder.scores.vocabulary == 10 %} bg-success {% else %} bg-secondary {% endif %}"> Vocabulary: {{ folder.scores.vocabulary }}/{{ folder.words.count }} </span>

							<span class="badge {% if folder.scores.gapfill == 10 %} bg-success {% else %} bg-secondary {% endif %}"> Gap Fill: {{ folder.scores.gapfill }}/{{ folder.words.count }}  </span>

							<span class="badge {% if folder.scores.listening == 10 %} bg-success {% else %} bg-secondary {% endif %}"> Listening: {{ folder.scores.listening }}/10 </span>

							<span class="badge {% if folder.scores.reading == 10 %} bg-success {% else %} bg-secondary {% endif %}"> Reading: {{ folder.scores.reading }} /10 </span>	
						</div>
					</div>
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
</div>
{%endblock%}
